<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:rabbit="http://www.springframework.org/schema/rabbit"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
<<<<<<< HEAD
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.2.xsd
=======
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
>>>>>>> branch 'master' of https://github.com/noonereplay/4gProvisioning.git
		http://www.springframework.org/schema/rabbit http://www.springframework.org/schema/rabbit/spring-rabbit-1.6.xsd
<<<<<<< HEAD
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.2.xsd">
=======
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">
>>>>>>> branch 'master' of https://github.com/noonereplay/4gProvisioning.git

	<bean id="jsonMessageConverter" class="org.springframework.amqp.support.converter.Jackson2JsonMessageConverter">
	</bean>
	
	<rabbit:connection-factory id="rabbitFactory" 
	addresses="${rabbit.task.url}" username="${rabbit.task.username}" password="${rabbit.task.password}"
	virtual-host="${rabbit.task.host}" channel-cache-size="10"  />

	
	<rabbit:listener-container connection-factory="rabbitFactory" acknowledge="auto" 
	requeue-rejected="true" 
	 transaction-manager="rabbitTxManager" prefetch="1" concurrency="10" >
		<rabbit:listener ref="provisioningListener"  queue-names="${rabbit.order.queue}"  />
	</rabbit:listener-container>
	

	<bean id="rabbitTxManager"
      class="org.springframework.amqp.rabbit.transaction.RabbitTransactionManager">
	    <property name="connectionFactory" ref="rabbitFactory"/>
	</bean>
	

	<bean id="provisioningListener" class="cat.prv.listen.ProvisioningListener" />

</beans>
